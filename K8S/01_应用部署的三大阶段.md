
# Kubernetes部署

## 01-介绍

Kubernetes 是 Google 在 2014 年开源的一个容器集群管理系统，使用 Go 开发，简称为 K8s，用于容器化应用程序的部署，扩展和管理<br>
**容器编排和容器自动化运维**

## 02-应用部署的三大阶段

1. **传统部署**  ：环境不隔离<br>
以java web容器（war包）为例:<br>
java打包war→上传到服务器→放到tomcat指定目录下<br>
特点：所有操作都是人工执行的，例如：scp，重启tomcat服务<br>
问题：人工繁琐；环境不隔离（当一台服务器运行两个tomcat服务，如果同时对同一文件操作会产生问题，产生资源争抢，网络带宽争抢，cpu，内存等争抢）<br>
![传统部署](/K8S/pictures/传统部署.png "传统部署")

2. **虚拟化部署**：占用资源过多<br>
原本一个服务器，用虚拟软件，虚拟多台虚拟机（单独的操作系统）出来，用虚拟机再来部署tomcat<br>
特点：解决了环境不隔离<br>
问题：资源损耗过大（虚拟化虚拟机很繁琐，占用资源过多）<br>
![虚拟化部署](/K8S/pictures/虚拟化部署.png "虚拟化部署")

3. **容器化部署**：
容器：实现文件系统，网络，cpu，内存，磁盘，进程，用户空间等资源的隔离<br>
本身容器与宿主机共用操作系统，硬件等；<br>
特点：环境隔离；占用资源少；启动效率高<br>
问题：容器不会自动修复；不会自动部署；不会滚动更新；<br>
![容器化部署](/K8S/pictures/容器化部署.png "容器化部署")


## 03-k8s
特点：自我修复；弹性伸缩；自动部署和回滚；服务发现和负载均衡；机密和配置管理；存储编排；批处理

## 04-企业级容器调度平台
三大平台：Apache Mesos、Docker Swarms、Google Kubernetes

## 05-Google kubernetes
基本概念：kubenetes是基于Google在过去十五年来大量生产环境中运行工作负载的经验，kubernetes的实现参考了Google内部的资源调度框架，但不是Borg的内部容器编排系统的开源，而是借鉴Google从运行Borg获得的经验教训，形成了kubernetes项目

它使用Label和Pod的概念来将容器划分为逻辑单元，Pods是同地协作（co-located）容器的集合，这些容器被共同部署和调度，形成了一个服务，这是kubernetes和其他两个框架的主要区别。相比于基于相识度的容器调度方式（就像swarm和mesos），这个方法简化了对集群的管理

优势：<br>
- 最流行的容器编排解决方案框架，基于Goolgle庞大的生态圈及社区产生的产品。
- 通过pods这一抽象概念，解决container之间的依赖通信问题。
- Pods，Services，Deployment是独立部署的部分。可以通过Selector提供更多的灵活性。内置服务注册表和负载均衡。
适用度更广，功能更强大，相较于mesos来说节点规模较小

